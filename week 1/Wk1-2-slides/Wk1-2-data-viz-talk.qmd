---
title: "Week 1-1 Data manipulation and visualisation"
format:
  revealjs:
    slide-number: true
    incremental: true
    width: 1600
    height: 900
    embed-resources: true
---

```{r}
library(ggplot2)
library(palmerpenguins)
```

# Key steps in data visualisation

1. **Question**: What question do I want to answer with this visualisation?
2. **Design (1)**: What is the best way to visualise data to answer question?
3. **Data wrangling**: Need to get your data into useful format for visualisation. 
4. **Make the plot**: Use ggplot2 to make the plot.
5. **Design (2)**: Refine look and make it look *!!amazing!!*
6. **Revise**: Can I improve to better communicate answer?

# Question: Do species differ in flipper length?

```{r}
penguins |> # pass `penguins` data to ggplot
  ggplot(
    aes(
      x = species, # what I want to depict on the x axis
      y = flipper_length_mm, # what I want to depict on the y axis
      group = species, # group level comparisons using `species`
      colour = species
    )
  ) + # colour violin by `species`
  geom_violin(aes(fill = species), # create violin, fill the violins by `species`
    alpha = 0.2, # set the transparency of fill
    trim = FALSE
  ) + # don't crop violin
  geom_jitter(alpha = 0.4, width = 0.1) + # add points to the plot
  geom_boxplot(width = 0.1) +
  coord_flip() + # change axes orientation
  theme_minimal() +
  theme(
  legend.position = "none"
  ) + 
  labs(x = "Species", y = "Flipper length (mm)", title = "")
```

# Question: How much does body mass increase with flipper length?

```{r}
penguins |>
  subset(!is.na(body_mass_g) & !is.na(flipper_length_mm) & !is.na(species) & !is.na(sex)) |>
  ggplot(aes(x = flipper_length_mm, y = body_mass_g, colour = species)) +
  geom_point(aes(shape = sex), alpha = 0.4, size = 2.8) +
  geom_smooth(method = "lm", se = FALSE, linewidth = 1.1) +
  facet_wrap(~species) +
  labs(
    title = "",
    x = "Flipper length (mm)",
    y = "Body mass (g)",
    colour = "Species",
    shape = "Sex"
  ) +
  theme_minimal(base_size = 16) +
  theme(
    plot.title = element_text(face = "bold"),
    legend.position = "bottom",
    panel.grid.minor = element_blank()
  )
```

# Four components to a `ggplot`

1. **data** - object name, e.g `penguins`
2. **aesthetics** - names of x and y variables. Also colour, shape, size, etc.
3. **geometries** - type of plot, e.g. scatter, histogram, boxplot, etc.
4. **theme** - the style

# The recipe for a `ggplot()`

![](images\ggplot2-basic-recipe.png)

Example of geometries:
```
geom_point() # scatterplot
geom_histogram() # histogram
geom_density() # density plot
geom_boxplot() # boxplot
geom_violin() # violin plot
```


# What is the right type of plot to answer my question?

![](images\data-to-viz-choose.jpg)
