---
title: "Plant Height"
author: "Soleille Miller and Daniel Falster"
format: html
editor: visual
---

## Overview

Angela Moles, a professor here at UNSW, used an open source data frame of maximum height data for 7084 plant species and site combinations to provide the first global, cross-species quantification of the latitudinal gradient in plant height. (You can read more about the original study at [doi:10.1111/j.1365-2745.2009.01526.x](doi.org/10.1111/j.1365-2745.2009.01526.x)).

We are going to use this data to do a bit of preliminary analyses and see if we can answer some questions about the patterns we find in the data.

When starting an analysis, it's important to first understand what exactly you want to learn from the data. That is, what question are you hoping to answer with your data. Asking clear, specific questions before starting analyses will help you stay on track and not over-analyse a data set.

The questions we will focus on for this practical are:

-   Does plant height vary across a longitudinal gradient?

-   Do higher altitudes create taller plants?

In other words: If latitude or altitude increases, does plant height increase?

## Aims

-   Read in data and assemble it

-   Create a new column in assembled data set

-   Visualize patterns in the data

-   Draw conclusions based off visualizations

## Assembling the Data

Read in the dataset `plantHeightSingleSpp.csv` from the folder `data/plant_height`:

```{r}

```

WOAH there are a LOT of variables in this data set. Sometimes it's nice to select only the columns you need for your analysis. This can make things easier in the long-run. Luckily, tidyverse can help with that!

Remember, our main questions are:

-   Does plant height increase as latitude increases?

-   Are plants from higher altitudes taller than plants from low altitudes?

**Q**: Which columns are relevant to this question? Pick all that apply (answers in moodle).

Now, create a new data frame with only the relevant columns.

```{r}

```

Check the structure of the data and make any necessary changes

```{r}
str(data1)
# looks alright! no changes to be made
```

Since we will eventually want to run linear models to answer this question, we want to check to make sure our response variable is **normally distributed**. This means that the values of this variable are symmetrical around the mean. This creates that a shaped curve in a histogram.

For example, in the iris data set, the variable Sepal.width is normally distributed but the variable Petal.width is not.

```{r}
ggplot(iris, aes(Sepal.Width)) + geom_histogram()

ggplot(iris, aes(Petal.Width)) + geom_histogram()

```

As you can see, sepal width in the iris data set shows frequencies that are symmetric around the mean (\~2.8) whereas petal width does not show that clear symmetry.

When the distribution of values does not show that clear bell curve, you need to transform it. We'll learn more about transforming data as the class progresses so don't worry if you don't fully understand how or why we do this yet.

Before visualizing the results, we should check to make sure that our response variable, height, is normally distributed.

make a histogram like in the plot above to graph the distribution of height in the data set.

```{r}


```

Does this show a normal distribution like we saw in the iris variable sepal width?

When running a linear model, height (our response variable) does not have a normal distribution. This means that we will have to take the `log10()` of height so that our response variable doesn't break assumptions of the model.

Create a new column with the log10 of height named "log_height"

```{r}

```

Does this show a more normal distribution?

```{r}

```

## Visualization

We'll first create a ggplot showing lat on the x-axis and height on the y-axis. Then, we'll create the same figure but using the log10 transformed data to see how it changes the patterns.

Create a plot to visualize the relationship between latitude and height.

Hint: What type of plot do you create when your predictor and response variable are both continuous numeric variables?

```{r}

```

I'd like to see the line of best fit! To add this to our figure, use `+ geom_smooth(method="lm")`.

```{r}

```

Now create the same plot but use log_height instead of height and include the line of best fit.

```{r}

```

You can see the clear difference between the transformed and untransformed data. It's important to know when to transform data to better suit your model otherwise you may end up accidentally misinterpreting your results!

**Moodle Q:**

Does log10(height) increase as latitude increases?

It actually seems to decrease as latitude increases!

Now, we are going to try to answer our second question; Does plant height increase as **altitude** increases?

We will continue to use the log10 of height (because it is still not normally distributed).

Make a plot that can help us answer this question and add the line of best fit.

```{}
```

**Moodle Q:**

Does log10(height) increase as latitude increases?
